apexcharts_card_templates:
  test2:
    color_list:
      - red
      - red
  test:
    config_templates: test2
    graph_span: 24h
    color_list:
      - black
    all_series_config:
      group_by:
        duration: 1h
        func: avg
      stroke_width: 2

views:
  - title: Main
    panel: true
    cards:
      - type: grid
        columns: 3
        cards:
          - type: custom:apexcharts-card
            apex_config:
              chart:
                toolbar:
                  show: true
                  tools:
                    zoom: true
                    zoomin: true
                    zoomout: true
                    pan: true
                    reset: true
                zoom:
                  enabled: true
              fill:
                type: gradient
                gradient:
                  type: vertical
                  shadeIntensity: 0.8
                  stops:
                    - 0
                    - 1000
                  inverseColors: false
            update_interval: 5sec
            # stacked: true
            series:
              - entity: sensor.random_0_1000
                name: Sensor 1
                type: area
                curve: straight
                color: yellow
                show:
                  extremas: true
              - entity: sensor.random_0_1000
                name: Sensor 1
                invert: true
                type: area
                curve: straight
                show:
                  extremas: time
              # - entity: sensor.random_0_1000
              #   name: Sensor 2
              #   type: area
              #   offset: -1d
              #   invert: true
            graph_span: 15min
            cache: true
            layout: minimal
            header:
              show: false

          - type: custom:apexcharts-card
            stacked: true
            # span:
            #   offset: -1d
            series:
              - entity: sensor.random_0_1000
                name: RAM Usage
                unit: Mb
                type: area
                curve: smooth
              - entity: sensor.random_0_1000
                name: Ram Free
                type: area
                stroke_width: 20
            graph_span: 15min
            cache: true
            layout: minimal
            header:
              floating: true

          - type: custom:apexcharts-card
            show:
              last_updated: true
            update_interval: 2s
            stacked: true
            experimental:
              color_threshold: true
              hidden_by_default: true
              # disable_config_validation: true
            series:
              - entity: sensor.random_0_1000
                name: test1
                type: column
                show:
                  datalabels: true
                group_by:
                  duration: 1m
                  func: last
                transform: return x/10;
                color_threshold:
                  - value: 33
                    color: '#00ff00'
                  - value: 66
                    color: '#000001'
                  - value: 0
                    color: '#ff0000'

              - entity: sensor.random0_100
                name: test2
                type: column
                show:
                  hidden_by_default: true
                  datalabels: total
                group_by:
                  duration: 1m
                  func: last
                # color_threshold:
                #   - value: 0
                #     color: '#0000ff'
                #   - value: 33
                #     color: '#00ff00'
                #   - value: 66
                #     color: '#ff0000'
            graph_span: 10min
            cache: true
          - type: custom:apexcharts-card
            graph_span: 200h
            series:
              - entity: sensor.random_0_1000
                transform: return x / 10;
                curve: straight
                show:
                  extremas: true

          - type: custom:apexcharts-card
            graph_span: 1h
            header:
              title: Test Aggregate
              show: true
              show_states: true
              colorize_states: true
            series:
              - entity: sensor.random0_100
                name: AVG
                curve: smooth
                type: line
                show:
                  as_duration: millisecond
                  in_header: true
                  in_chart: false
                  name_in_header: false
                group_by:
                  duration: 10min
                  func: avg
              - entity: sensor.random0_100
                name: AVG
                curve: smooth
                type: line
                show:
                  as_duration: minute
                group_by:
                  duration: 10min
                  func: avg
              - entity: sensor.random0_100
                curve: smooth
                name: MIN
                type: line
                show:
                  as_duration: hour
                group_by:
                  duration: 10min
                  func: min
              - entity: sensor.random0_100
                curve: smooth
                name: MAX
                type: line
                show:
                  as_duration: day
                group_by:
                  duration: 10min
                  func: max
              - entity: sensor.random0_100
                curve: smooth
                name: LAST
                type: line
                show:
                  # as_duration: month
                  in_header: true
                  in_chart: false
                # show:
                #   as_duration: month
                group_by:
                  duration: 10min
                  func: last
              - entity: sensor.random0_100
                curve: smooth
                name: FIRST
                type: line
                show:
                  as_duration: year
                  in_header: raw
                group_by:
                  duration: 10min
                  func: first
              - entity: sensor.random0_100
                curve: smooth
                name: DIFF
                type: line
                show:
                  as_duration: year
                  in_header: true
                  in_chart: false
                group_by:
                  duration: 10min
                  func: diff

          - type: custom:apexcharts-card
            graph_span: 4h
            header:
              title: Test
            series:
              - entity: sensor.random_0_1000
                transform: return x / 10;
                type: area
                name: Outside Humidity
                opacity: 0.3
                group_by:
                  func: avg
                  duration: 1h
              - entity: sensor.random0_100
                type: area
                name: Office Humidity
                opacity: 0.3
                group_by:
                  func: avg
                  duration: 1h
                show:
                  datalabels: true
          - type: sensor
            entity: sensor.random_0_1000
            graph: line

          - type: custom:apexcharts-card
            graph_span: 6h
            header:
              show: false
            series:
              - entity: sensor.random_0_1000
                transform: return x / 10;
                type: line
                name: Outside Humidity
                fill_raw: last
                group_by:
                  func: avg
                  fill: last
                  duration: 30min
              - entity: sensor.random0_100
                fill_raw: last
                type: column
                name: Office Humidity
                group_by:
                  func: avg
                  duration: 30min
                # color_threshold:
                #   - value: 49
                #     color: '#ff0000'
                #   - value: 0
                #     color: '#00ff00'

          - type: custom:apexcharts-card
            header:
              show: true
              title: Start of day
            graph_span: 24h
            span:
              start: day
            series:
              - entity: sensor.random0_100
                extend_to: false
                type: column
                show:
                  datalabels: true
                group_by:
                  func: avg
                  fill: 'null'

          - type: custom:apexcharts-card
            header:
              show: true
              title: Last 8h
            graph_span: 8h
            span:
              end: hour
            apex_config:
              yaxis:
                - title:
                    text: test1
                  show: true
                  opposite: true
                  decimalsInFloat: 1
                - title:
                    text: Test2
                  show: true
                  # opposite: true
                  decimalsInFloat: 1
            series:
              - entity: sensor.random0_100
                extend_to: false
                type: column
                invert: true
                float_precision: 3
                group_by:
                  func: avg
                  fill: 'last'
                show:
                  legend_value: true
                  datalabels: true
              - entity: sensor.random0_100
                extend_to: false
                type: column
                group_by:
                  func: avg
                  fill: 'last'
                show:
                  datalabels: true
              - entity: sensor.random0_100
                extend_to: false
                type: column
                group_by:
                  func: avg
                  fill: 'last'
                show:
                  datalabels: true

          - type: custom:apexcharts-card
            graph_span: 24h
            span:
              start: day
            # y_axis_precision: 5
            now:
              show: true
              color: '#ff0000'
              label: Now
            header:
              show: true
              show_states: true
            yaxis:
              - decimals: 5
            series:
              - entity: sensor.pvpc
                float_precision: 5
                show:
                  extremas: time
                  in_header: true
                data_generator: |
                  return [...Array(22).keys()].map((hour) => {
                    const attr = 'price_' + `${hour}`.padStart(2, '0') + 'h';
                    const value = entity.attributes[attr];
                    return [moment().startOf('day').hours(hour).valueOf(), value];
                  })

          - type: custom:apexcharts-card
            graph_span: 8d
            span:
              start: day
              offset: -3d
            header:
              show: true
              title: Temperature Forecast
              show_states: true
            now:
              show: true
              label: 'now'
              color: '#0066ff88'
            apex_config:
              legend:
                show: false
            series:
              - entity: weather.openweathermap
                name: Temperature
                unit: °C
                attribute: temperature
                fill_raw: last
                extend_to: false
                group_by:
                  func: avg
                  duration: 1h
              - entity: weather.openweathermap
                type: line
                extend_to: false
                unit: °C
                show:
                  in_header: after_now
                data_generator: |
                  return entity.attributes.forecast.map((entry) => {
                    return [new Date(entry.datetime).getTime(), entry.temperature];
                  });

          - type: custom:apexcharts-card
            graph_span: 20min
            experimental:
              color_threshold: true
            series:
              - entity: sensor.random_0_1000
                type: line
                stroke_width: 2
                color_threshold:
                  - value: 0
                    color: blue
                  - value: 250
                    color: green
                  - value: 500
                    color: yellow
                    # opacity: 0
                  - value: 500
                    color: orange
                  - value: 750
                    color: orange
                  - value: 750
                    color: red
                  - value: 1000
                    color: red
          - type: custom:apexcharts-card
            header:
              show: true
              title: radialBar
              show_states: true
            chart_type: radialBar
            series:
              - entity: sensor.random0_100
              - entity: sensor.random_0_1000
                unit: Mbits/s
                float_precision: 4
                min: 0
                max: 1000
                group_by:
                  func: avg
                  duration: 30min
          - type: custom:apexcharts-card
            chart_type: pie
            header:
              show: true
              title: pie
            series:
              - entity: sensor.random0_100
                unit: kWh
                show:
                  datalabels: percent

              - entity: sensor.random_0_1000
          - type: custom:apexcharts-card
            chart_type: donut
            header:
              show: true
              title: donut
            series:
              - entity: sensor.random0_100
              - entity: sensor.random_0_1000
          - type: custom:apexcharts-card
            chart_type: line
            graph_span: 15m
            header:
              show: true
              title: line
            series:
              - entity: sensor.random0_100
                show:
                  extremas: true
                color_threshold:
                  - value: 0
                    color: '#0000ff'
                  - value: 33
                    color: '#00ff00'
                  - value: 66
                    color: '#ff0000'
              - entity: sensor.random_0_1000
                show:
                  extremas: true
          - type: custom:apexcharts-card
            header:
              show: true
              title: scatter
            chart_type: scatter
            apex_config:
              responsive:
                - breakpoint: 400
                  options:
                    chart:
                      height: 500px
                - breakpoint: 5000
                  options:
                    chart:
                      height: auto
            series:
              - entity: sensor.random0_100
                group_by:
                  func: sum
                  duration: 20min
              - entity: sensor.random_0_1000
                group_by:
                  func: sum
                  duration: 20min

          - type: custom:apexcharts-card
            graph_span: 1h
            update_delay: 5.5s
            # apex_config:
            #   dataLabels:
            #     enabled: true
            hours_12: true
            header:
              show: true
              title: Light Brightness (attribute test)
            series:
              - entity: light.kitchen_lights
                attribute: brightness
            apex_config:
              tooltip:
                x:
                  format: MMM

          - type: custom:apexcharts-card
            header:
              show: true
              title: shouldn't extend to end with group_by
            span:
              start: day
            series:
              - entity: sensor.random0_100
                group_by:
                  duration: 1h
                  func: last
              - entity: sensor.random0_100
                extend_to: false
                group_by:
                  duration: 1h
                  func: last

          - type: custom:apexcharts-card
            update_interval: 2s
            graph_span: 10s
            header:
              show: true
              title: should show a line
            series:
              - entity: sensor.outside_temperature
                curve: stepline
                extend_to: end

          - type: custom:apexcharts-card
            update_delay: 3s
            graph_span: 5min
            series:
              - entity: input_boolean.test_boolean
                transform: "return x === 'on' ? 1 : 0;"
          - type: custom:apexcharts-card
            update_delay: 3s
            graph_span: 5min
            series:
              - entity: input_boolean.test_boolean
                transform: "return x === 'on' ? 1 : 0;"
          - type: custom:apexcharts-card
            update_delay: 3s
            graph_span: 5min
            series:
              - entity: input_boolean.test_boolean
                transform: "return x === 'on' ? 1 : 0;"
          - type: custom:apexcharts-card
            graph_span: 30min
            header:
              show: true
              show_states: true
              colorize_states: true
            experimental:
              color_threshold: true
            series:
              - entity: sensor.random0_100
                transform: return x / 2 - 15;
                show:
                  header_color_threshold: true
                color_threshold:
                  - value: -10
                    # color can be a color name, rgb(r, g, b), '#0000ff' or var(--color-variable)
                    # default is: the default color of the serie
                    color: blue
                    # optional opacity, value from 0 to 1.
                    # Default is 1 for 'type: line' and 0.7 for `type: area`
                    opacity: 0
                  - value: 0
                    color: cyan
                  - value: 15
                    color: green
                  - value: 25
                    color: orange
          - type: custom:apexcharts-card
            graph_span: 30min
            experimental:
              color_threshold: true
            header:
              show: true
              show_states: true
              colorize_states: true
            series:
              - entity: sensor.random0_100
                type: area
                stroke_width: 0
                opacity: 0.5
                transform: return x / 2 - 15;
                show:
                  header_color_threshold: true
                invert: true
                color_threshold:
                  - value: -10
                    # color can be a color name, rgb(r, g, b), '#0000ff' or var(--color-variable)
                    # default is: the default color of the serie
                    # color: blue
                    # optional opacity, value from 0 to 1.
                    # Default is 1 for 'type: line' and 0.7 for `type: area`
                    # opacity: 1
                  - value: 0
                    color: cyan
                  - value: 15
                    color: green
                  - value: 25
                    color: orange
          - type: custom:apexcharts-card
            graph_span: 30min
            header:
              show: true
              show_states: true
              colorize_states: true
            experimental:
              color_threshold: true
            series:
              - entity: sensor.random0_100
                type: column
                # stroke_width: 0
                transform: return x / 2 - 15;
                show:
                  header_color_threshold: true
                color_threshold:
                  - value: -10
                    # color can be a color name, rgb(r, g, b), '#0000ff' or var(--color-variable)
                    # default is: the default color of the serie
                    # color: blue
                    # optional opacity, value from 0 to 1.
                    # Default is 1 for 'type: line' and 0.7 for `type: area`
                    opacity: 0
                  - value: 0
                    color: cyan
                  - value: 15
                    color: green
                  - value: 25
                    color: orange

          - type: custom:apexcharts-card
            config_templates:
              - test
            series:
              - entity: sensor.temperature
              - entity: sensor.temperature

          - type: custom:apexcharts-card
            experimental:
              color_threshold: true
            series:
              - entity: sensor.temperature
                fill_raw: last
                type: column
                color_threshold:
                  - value: -10
                    color: blue
                    opacity: 1
                  - value: 0
                    color: cyan
                  - value: 15
                    color: green
                  - value: 25
                    color: orange
                data_generator: |
                  let res = [];
                  let i = -6;
                  start = new Date(start.getTime() - 4 * 1000 * 60 * 60);
                  Array.from(Array(28).keys()).forEach((entry, index) => {
                    res.push([new Date(start.getTime() + index * 1000 * 60 * 60).getTime(), i]);
                    i += 2;
                    if (i >= 28) i = -15;
                  });
                  return res;

          - type: 'custom:apexcharts-card'
            experimental:
              color_threshold: true
            graph_span: 12h
            header:
              show: true
              show_states: true
              colorize_states: true
            series:
              - entity: sensor.temperature
                show:
                  header_color_threshold: true
                curve: smooth
                color_threshold:
                  - value: 300
                    color: green
                  - value: 700
                    color: '#82ed82'
                  - value: 1100
                    color: '#e8e041'
                  - value: 1600
                    color: '#e88941'
                  - value: 2100
                    color: '#e84141'
                data_generator: |
                  let res = [];
                  let i = 400;
                  start = new Date(start.getTime() - 4 * 1000 * 60 * 60);
                  Array.from(Array(28).keys()).forEach((entry, index) => {
                    res.push([new Date(start.getTime() + index * 1000 * 60 * 60).getTime(), i]);
                    i += 200;
                    if (i >= 1401) i = 400;
                  });
                  return res;
            now:
              show: true
              label: now
            apex_config:
              chart:
                height: 250px
          - type: 'custom:apexcharts-card'
            show:
              loading: false
            apex_config:
              chart:
                height: 350
              fill:
                type: gradient
                gradient:
                  type: vertical
                  fill: dark
                  shadeIntensity: 0
                  stops:
                    - 20
                    - 100
                  opacityFrom:
                    - 0.1
                    - 0.1
                    - 1
                  opacityTo:
                    - 0.6
                    - 0.6
                    - 0.3
              plotOptions:
                bar:
                  columnWidth: 50%
              yaxis:
                - show: true
                  title: Temp
                  min: -20
                  max: 30
                - show: false
                  title: Temp
                  min: -20
                  max: 30
                - show: true
                  title: Snow
                  min: 0
                  max: 40
                  opposite: true
                - show: false
                  min: 0
                  max: 40
            graph_span: 6d
            span:
              start: day
            header:
              show: true
              title: Weather Forecast
            all_series_config:
              show:
                extremas: time
            series:
              - entity: weather.home
                type: area
                fill_raw: last
                extend_to: false
                color: var(--yellowish)
                name: Max
                stroke_width: 2
                data_generator: |
                  return entity.attributes.forecast.map((entry) => {
                    return [new Date(entry.datetime).getTime(), entry.temperature];
                  });
              - entity: weather.home
                type: area
                fill_raw: last
                extend_to: false
                color: var(--cyanish)
                name: Min
                stroke_width: 2
                data_generator: |
                  return entity.attributes.forecast.map((entry) => {
                    return [new Date(entry.datetime).getTime(), entry.templow];
                  });
              - entity: weather.home
                type: column
                fill_raw: last
                extend_to: false
                color: 'rgba(255, 255, 255, 1)'
                name: Snow
                stroke_width: 0
                data_generator: |
                  return entity.attributes.forecast.map((entry) => {
                    return [new Date(entry.datetime).getTime(), entry.temperature];
                  });
              - entity: weather.home
                type: column
                fill_raw: last
                extend_to: false
                color: var(--cyanish)
                name: Rain
                stroke_width: 0
                data_generator: |
                  return entity.attributes.forecast.map((entry) => {
                    return [new Date(entry.datetime).getTime(), entry.templow];
                  });
          - type: 'custom:apexcharts-card'
            span:
              end: day
            hours_12: false
            header:
              show: true
              show_states: true
              colorize_states: true
            all_series_config:
              stroke_width: 2
            series:
              - entity: sensor.pvpc
                name: Daikin
                type: column
                group_by:
                  func: sum
                  duration: 120min

          - type: custom:apexcharts-card
            experimental:
              color_threshold: true
              brush: true
            graph_span: 2h
            brush:
              selection_span: 10m
            header:
              show: true
              title: test
              standard_format: true
              show_states: false
            series:
              - entity: sensor.random0_100
                color: blue
                type: area
                stroke_width: 1
                color_threshold:
                  - value: 0
                    color: red
                  - value: 50
                    color: yellow
                  - value: 100
                    color: green
              - entity: sensor.random0_100
                color: blue
                stroke_width: 1
                float_precision: 0
                show:
                  in_brush: true
                  in_chart: false
          - type: custom:apexcharts-card
            graph_span: 1h
            all_series_config:
              type: column
            series:
              - entity: sensor.random0_100
                name: last
                group_by:
                  func: last
                  duration: 10min
              - entity: sensor.random0_100
                name: first
                group_by:
                  func: first
                  duration: 10min
                  start_with_last: true
          - type: custom:apexcharts-card
            graph_span: 1 week
            span:
              end: week
            all_series_config:
              type: column
              extend_to: false
              group_by:
                fill: 'null'
            series:
              - entity: sensor.random0_100
                name: last
                group_by:
                  func: last
                  duration: 10min
              - entity: sensor.random0_100
                name: first
                group_by:
                  func: first
                  duration: 10min
                  start_with_last: true

          - type: custom:apexcharts-card
            graph_span: 1h
            header:
              show: true
              show_states: true
            series:
              - entity: sensor.random0_100
                name: last hour
              - entity: sensor.random0_100
                name: previous hour
                offset: -1h
                show:
                  offset_in_name: false
          - type: custom:apexcharts-card
            header:
              show: true
              title: Irradiance
              show_states: true
              colorize_states: true
            now:
              show: true
            graph_span: 1d
            span:
              start: day
            series:
              - entity: sensor.random0_100
                group_by:
                  func: avg
                  duration: 1h
              - entity: sensor.random0_100
                offset: -1d
                group_by:
                  func: avg
                  duration: 1h
                show:
                  in_header: before_now

          - type: custom:apexcharts-card
            header:
              show: true
              title: Shouldn't show a spike at the begining
            graph_span: 60m
            update_interval: 1m
            span:
              end: hour
            series:
              - entity: sensor.counter
                type: column
                # offset: +5min
                group_by:
                  func: diff
                  duration: 10s

          - type: custom:apexcharts-card
            header:
              show: true
              title: Significant Updates
            graph_span: 1m
            series:
              - entity: sensor.counter_no_significant_update

          - type: custom:apexcharts-card
            header:
              show: true
              title: Significant Updates
            graph_span: 1h
            apex_config:
              xaxis:
                labels:
                  formatter: >
                    EVAL:function(value) {
                      return "42";
                    }
              yaxis:
                labels:
                  formatter: |
                    EVAL:function(value) {
                      return "42";
                    }
            series:
              - entity: sensor.random0_100

          - type: custom:apexcharts-card
            graph_span: 20min
            all_series_config:
              stroke_width: 2
            series:
              - entity: sensor.random0_100
                yaxis_id: second
                invert: true
              - entity: sensor.random0_100
                yaxis_id: first
                transform: 'return Number(x) + 30.12;'
              - entity: sensor.random0_100
                yaxis_id: first
                transform: 'return Number(x) + 60;'
            yaxis:
              - id: first
                align_to: 10
                apex_config:
                  tickAmount: 2
              - id: second
                max: '|+100|'
                min: ~100
                align_to: 200
                opposite: true
                decimals: 0
                show: true
                apex_config:
                  tickAmount: 6
          - type: custom:apexcharts-card
            show:
              last_updated: true
            graph_span: 20min
            all_series_config:
              stroke_width: 2
            series:
              - entity: sensor.random0_100
                header_actions:
                  tap_action:
                    action: more-info
                    confirmation:
                      text: test
                  hold_action:
                    action: more-info
                    entity: sensor.random_0_1000
              - entity: sensor.random0_100
                transform: 'return Number(x) + 1230;'
            yaxis:
              - min: 0
                max: ~1200
                apex_config:
                  tickAmount: 4
            header:
              title: Test Actions
              show: true
              show_states: true
              colorize_states: true
          - type: custom:apexcharts-card
            show:
              last_updated: true
            graph_span: 20min
            all_series_config:
              stroke_width: 2
            series:
              - entity: sensor.random0_100
                header_actions:
                  hold_action:
                    action: more-info
                    entity: sensor.random_0_1000
              - entity: sensor.random0_100
                transform: 'return Number(x) + 1230;'
            yaxis:
              - min: 0
                max: ~1200
                apex_config:
                  tickAmount: 4
            header:
              title: Actions Disabled
              show: true
              show_states: true
              colorize_states: true
              disable_actions: true
          - type: 'custom:apexcharts-card'
            header:
              show: true
              title: ApexCharts-Card
              show_states: true
            series:
              - entity: sensor.random0_100
                name: Temperature
                data_generator: |
                  const now = new Date();
                  const data = [];
                  data.push([now.getTime() - 25 * 1000 * 60 * 60, 50])
                  data.push([now.getTime() - 10 * 1000 * 60 * 60, 21.2])
                  data.push([now.getTime() -  4 * 1000 * 60 * 60, 20.4])
                  data.push([now.getTime() -  3 * 1000 * 60 * 60, 19.7])
                  data.push([now.getTime() -  0 * 1000 * 60 * 60, 19.7])
                  return data;
                yaxis_id: temp
                show:
                  extremas: true
            yaxis:
              - id: temp
          - type: custom:apexcharts-card
            experimental:
              color_threshold: true
            graph_span: 12min
            # update_interval: 1h
            yaxis:
              - id: one
                decimals: 0
                min: -1
                max: 10
              - id: two
                decimals: 0
                opposite: true
                min: ~20
                max: ~65
            all_series_config:
              offset: -5h
            series:
              - entity: sensor.random0_100
                transform: return x % 4;
                yaxis_id: one
                fill_raw: last
                color_threshold:
                  - value: -1
                    color: yellow
                  - value: 2
                    color: green
                  - value: 5
                    color: red
                  - value: 9
                    color: purple
                show:
                  extremas: time
                group_by:
                  func: avg
                  duration: 3min
                  fill: last
              - entity: sensor.random0_100
                transform: return x % 45 + 20;
                yaxis_id: two
                type: area
                opacity: 0.2
                group_by:
                  func: avg
                  duration: 3min

  - title: Main2
    panel: true
    cards:
      - type: grid
        columns: 3
        cards:
          - type: custom:apexcharts-card
            graph_span: 1h
            header:
              show: true
              show_states: true
            series:
              - entity: sensor.random_0_1000
                float_precision: 0
                show:
                  in_header: true
                group_by:
                  duration: 15min
                  func: avg
                header_actions:
                  tap_action:
                    action: fire-dom-event
                    browser_mod:
                      command: toast
                      message: Hello, world!

          - type: custom:apexcharts-card
            graph_span: 1h
            header:
              show: true
              show_states: true
              title: Test Extremas
            all_series_config:
              header_actions:
                tap_action:
                  action: fire-dom-event
                  browser_mod:
                    command: popup
                    card:
                      type: button
                      entity: sensor.random0_100
                    style: |
                      ha-dialog {
                        --mdc-dialog-max-width: 100vw !important;
                      }
                      :host .content {
                        width: 98vw !important;
                      }
                      ha-card {
                        border-radius: 0.8vw;
                        opacity: 0.9;
                      }
                    title: Synology NAS
            series:
              - entity: sensor.random_0_1000
                name: Min
                float_precision: 0
                show:
                  extremas: min
                group_by:
                  duration: 2min
                  func: avg
              - entity: sensor.random_0_1000
                name: Max
                float_precision: 0
                transform: return Number(x) + 200;
                show:
                  extremas: max
                group_by:
                  duration: 2min
                  func: avg
              - entity: sensor.random_0_1000
                name: Min+Time
                float_precision: 0
                transform: return Number(x) + 400;
                show:
                  extremas: min+time
                group_by:
                  duration: 2min
                  func: avg
              - entity: sensor.random_0_1000
                name: Max+Time
                float_precision: 0
                transform: return Number(x) + 600;
                show:
                  extremas: max+time
                group_by:
                  duration: 2min
                  func: avg
              - entity: sensor.random_0_1000
                name: All
                float_precision: 0
                transform: return Number(x) + 800;
                show:
                  extremas: true
                group_by:
                  duration: 2min
                  func: avg
          - type: custom:apexcharts-card
            graph_span: 1h
            span:
              start: hour
            series:
              - entity: sensor.random0_100
                name: no extend
                extend_to: false
                data_generator: |
                  const now_minus10 = new Date(start.getTime() + 10 * 1000 * 60);
                  return [
                    [start.getTime(), 10],
                    [now_minus10.getTime(), 10]
                  ];
              - entity: sensor.random0_100
                name: extend to now
                extend_to: now
                data_generator: |
                  const now_minus10 = new Date(start.getTime() + 10 * 1000 * 60);
                  return [
                    [start.getTime(), 20],
                    [now_minus10.getTime(), 20]
                  ];
              - entity: sensor.random0_100
                name: extend to end
                extend_to: end
                data_generator: |
                  const now_minus10 = new Date(start.getTime() + 10 * 1000 * 60);
                  return [
                    [start.getTime(), 30],
                    [now_minus10.getTime(), 30]
                  ];
          - type: custom:apexcharts-card
            graph_span: 2h
            header:
              show: true
              title: second serie should cover first hour
            all_series_config:
              stroke_width: 1
            series:
              - entity: sensor.random0_100
              - entity: sensor.random0_100
                time_delta: -1h
                offset: -1h
          - type: custom:apexcharts-card
            graph_span: 2d
            span:
              start: day
            header:
              show: true
              title: Line should not get back in time
            all_series_config:
              stroke_width: 1
              extend_to: now
            series:
              - entity: sensor.random0_100
                data_generator: |
                  const tomorrow = new Date(start.getTime() + 25 * 1000 * 60 * 60);
                  const tomorrow2 = new Date(start.getTime() + 28 * 1000 * 60 * 60);
                  return [
                    [tomorrow.getTime(), 30],
                    [tomorrow2.getTime(), 20]
                  ];
  - title: Long Term Stats
    panel: true
    cards:
      - type: custom:apexcharts-card
        cache: false
        graph_span: 1d
        header:
          show: true
          title: Test Stats
          show_states: true
          title_actions:
            tap_action:
              action: more-info
              entity: sensor.random_0_1000
              confirmation:
                text: test
            hold_action:
              action: more-info
              entity: sensor.random_0_1000
        all_series_config:
          stroke_width: 1
        series:
          - entity: sensor.today_energy
            type: column
            statistics:
              type: mean
              period: 5minute
          - entity: sensor.temperature
